<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrÃ² ChÆ¡i Ã”n Táº­p Tiáº¿ng Trung - BÃ i 17</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
        }
        .feedback-correct {
            animation: pop 0.5s ease;
        }
        .feedback-incorrect {
            animation: shake 0.5s ease;
        }
        @keyframes pop {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
    </style>
</head>
<body class="bg-rose-50 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="w-full max-w-2xl mx-auto">

        <!-- MÃ n hÃ¬nh báº¯t Ä‘áº§u -->
        <div id="start-screen" class="text-center p-8 bg-white rounded-2xl shadow-lg">
            <h1 class="text-3xl md:text-4xl font-bold text-rose-600 mb-4">Ã”n táº­p BÃ i 17 nÃ o! ğŸ®</h1>
            <p class="text-lg mb-6">Báº¡n Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ "xá»­ lÃ½" cÃ¢u chá»¯ "æŠŠ" trong bÃ i "æŠŠâ€œç¦â€å­—å€’ç€è´´åœ¨é—¨ä¸Š" chÆ°a? Thá»­ sá»©c ngay thÃ´i!</p>
            <img src="https://placehold.co/400x200/FFE4E6/E11D48?text=B%E1%BA%AFt+%C4%91%E1%BA%A7u!+%F0%9F%A5%B3" class="rounded-lg mx-auto mb-6" alt="HÃ¬nh áº£nh chÃ o má»«ng">
            <button id="start-btn" class="w-full bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 px-6 rounded-lg text-xl transition-transform transform hover:scale-105">
                ChÆ¡i ngay!
            </button>
        </div>

        <!-- MÃ n hÃ¬nh chÃ­nh cá»§a trÃ² chÆ¡i -->
        <div id="game-screen" class="hidden">
            <!-- Header thÃ´ng tin -->
            <div class="flex justify-between items-center mb-4 bg-white p-4 rounded-xl shadow-md">
                <div>
                    <h2 id="section-title" class="text-xl font-bold text-rose-600"></h2>
                    <p id="question-counter" class="text-sm text-gray-500"></p>
                </div>
                <div class="text-right">
                    <div class="text-lg font-semibold">â° <span id="timer">00:00</span></div>
                    <div class="text-lg font-semibold">ğŸ† <span id="score">0</span> Ä‘iá»ƒm</div>
                </div>
            </div>

            <!-- Khu vá»±c cÃ¢u há»i -->
            <div class="bg-white p-6 rounded-2xl shadow-lg mb-4">
                <div id="question-container" class="mb-5 min-h-[60px]"></div>
                <div id="input-area" class="flex items-center gap-2">
                    <input type="text" id="answer-input" class="flex-grow p-3 border-2 border-rose-200 rounded-lg focus:ring-2 focus:ring-rose-400 focus:border-rose-400 outline-none transition" placeholder="Nháº­p cÃ¢u tráº£ lá»i cá»§a báº¡n...">
                    <button id="check-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-5 rounded-lg transition">Kiá»ƒm tra</button>
                </div>
                 <div id="essay-area" class="hidden">
                    <textarea id="essay-input" rows="8" class="w-full p-3 border-2 border-rose-200 rounded-lg focus:ring-2 focus:ring-rose-400 focus:border-rose-400 outline-none transition" placeholder="Viáº¿t Ä‘oáº¡n vÄƒn mÃ´ táº£ cÃ¡c bÆ°á»›c á»Ÿ Ä‘Ã¢y..."></textarea>
                    <button id="submit-essay-btn" class="w-full mt-2 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-5 rounded-lg transition">Ná»™p bÃ i</button>
                </div>
            </div>
            
            <!-- Pháº£n há»“i -->
            <div id="feedback-message" class="text-center font-bold text-xl p-2 min-h-[40px]"></div>

            <!-- CÃ¡c nÃºt Ä‘iá»u khiá»ƒn -->
            <div class="flex justify-center gap-4 mt-4">
                <button id="hint-btn" class="bg-sky-500 hover:bg-sky-600 text-white py-2 px-5 rounded-lg transition">ğŸ’¡ Gá»£i Ã½</button>
                <button id="skip-btn" class="bg-gray-400 hover:bg-gray-500 text-white py-2 px-5 rounded-lg transition">Bá» qua</button>
            </div>
        </div>
        
        <!-- MÃ n hÃ¬nh tá»•ng káº¿t -->
        <div id="summary-screen" class="hidden text-center p-8 bg-white rounded-2xl shadow-lg">
            <h1 class="text-3xl md:text-4xl font-bold text-rose-600 mb-2">HoÃ n thÃ nh xuáº¥t sáº¯c! ğŸ‰</h1>
            <p class="text-lg mb-6">CÃ¹ng xem láº¡i káº¿t quáº£ cá»§a báº¡n nÃ o:</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-white mb-6">
                <div class="bg-green-500 p-4 rounded-lg">
                    <div class="text-4xl font-bold" id="correct-summary">0</div>
                    <div class="text-lg">ÄÃºng</div>
                </div>
                <div class="bg-red-500 p-4 rounded-lg">
                    <div class="text-4xl font-bold" id="incorrect-summary">0</div>
                    <div class="text-lg">Sai</div>
                </div>
                <div class="bg-blue-500 p-4 rounded-lg">
                    <div class="text-4xl font-bold" id="time-summary">00:00</div>
                    <div class="text-lg">Tá»•ng thá»i gian</div>
                </div>
            </div>

            <div id="review-section" class="text-left mb-6">
                <h3 class="text-xl font-bold mb-3 text-rose-700">ğŸ” Cáº§n xem láº¡i á»Ÿ:</h3>
                <ul id="mistake-list" class="list-disc list-inside bg-rose-50 p-4 rounded-lg"></ul>
            </div>
            
             <div id="essay-review-section" class="text-left mb-6 hidden">
                <h3 class="text-xl font-bold mb-3 text-rose-700">ğŸ“ CÃ¡c bÃ i viáº¿t cá»§a báº¡n:</h3>
                <div id="saved-essay-container"></div>
            </div>

            <button id="restart-btn" class="w-full bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 px-6 rounded-lg text-xl transition-transform transform hover:scale-105">
                ChÆ¡i láº¡i láº§n ná»¯a
            </button>
        </div>
    </div>

    <script>
        // Láº¥y cÃ¡c pháº§n tá»­ DOM
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const summaryScreen = document.getElementById('summary-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const sectionTitle = document.getElementById('section-title');
        const questionCounter = document.getElementById('question-counter');
        const timerEl = document.getElementById('timer');
        const scoreEl = document.getElementById('score');
        const questionContainer = document.getElementById('question-container');
        const answerInput = document.getElementById('answer-input');
        const checkBtn = document.getElementById('check-btn');
        const feedbackMessage = document.getElementById('feedback-message');
        const hintBtn = document.getElementById('hint-btn');
        const skipBtn = document.getElementById('skip-btn');
        const inputArea = document.getElementById('input-area');
        const essayArea = document.getElementById('essay-area');
        const essayInput = document.getElementById('essay-input');
        const submitEssayBtn = document.getElementById('submit-essay-btn');


        // Dá»¯ liá»‡u trÃ² chÆ¡i Ä‘Æ°á»£c láº¥y tá»« bÃ i giáº£ng
        const gameData = [
            {
                title: "âœï¸ Ã”n táº­p Chá»¯ HÃ¡n",
                questions: [
                    { question: "Viáº¿t chá»¯ HÃ¡n cho 'bÃ¹zhÃ¬' (bá»‘ trÃ­)", answer: "å¸ƒç½®", hint: "Chá»¯ Ä‘áº§u tiÃªn cÃ³ bá»™ ç½’ (vÃµng) vÃ  chá»¯ thá»© hai cÃ³ bá»™ å·¾ (cÃ¢n)." },
                    { question: "Viáº¿t chá»¯ HÃ¡n cho 'dÇsÇo' (quÃ©t dá»n)", answer: "æ‰“æ‰«", hint: "Chá»¯ Ä‘áº§u tiÃªn cÃ³ bá»™ æ‰Œ(thá»§), chá»¯ thá»© hai cÅ©ng váº­y." },
                    { question: "Viáº¿t chá»¯ HÃ¡n cho 'guÃ ' (treo)", answer: "æŒ‚", hint: "BÃªn trÃ¡i lÃ  bá»™ æ‰Œ(thá»§)." },
                    { question: "Viáº¿t chá»¯ HÃ¡n cho 'tiÄ“' (dÃ¡n)", answer: "è´´", hint: "BÃªn trÃ¡i lÃ  bá»™ è´ (bá»‘i)." },
                    { question: "Viáº¿t chá»¯ HÃ¡n cho 'fÃº' (phÃºc)", answer: "ç¦", hint: "BÃªn trÃ¡i lÃ  bá»™ ç¤»(thá»‹)." },
                    { question: "Viáº¿t chá»¯ HÃ¡n cho 'duÃ¬liÃ¡nr' (cÃ¢u Ä‘á»‘i)", answer: "å¯¹è”", hint: "Chá»¯ thá»© hai cÃ³ bá»™ è€³ (nhÄ©)." },
                ]
            },
            {
                title: "ğŸ“š Ã”n táº­p Tá»« vá»±ng",
                questions: [
                    { question: "'Náº¿m, thÆ°á»Ÿng thá»©c' trong tiáº¿ng Trung lÃ  gÃ¬?", answer: "å“å°", hint: "Ã‚m HÃ¡n Viá»‡t lÃ  'pháº©m thÆ°á»Ÿng'." },
                    { question: "'Tá»± tay' lÃ m gÃ¬ Ä‘Ã³ lÃ  gÃ¬?", answer: "äº²æ‰‹", hint: "Ã‚m HÃ¡n Viá»‡t lÃ  'thÃ¢n thá»§'." },
                    { question: "'Há»™i trÆ°á»ng' trong tiáº¿ng Trung lÃ  gÃ¬?", answer: "ä¼šåœº", hint: "Ã‚m HÃ¡n Viá»‡t lÃ  'há»™i trÆ°á»ng'." },
                    { question: "'Äá»“ng Ã½, nháº­n lá»i' lÃ  gÃ¬?", answer: "ç­”åº”", hint: "Ã‚m HÃ¡n Viá»‡t lÃ  'Ä‘Ã¡p á»©ng'." },
                    { question: "'Niá»m vui báº¥t ngá»' lÃ  gÃ¬?", answer: "æƒŠå–œ", hint: "Ã‚m HÃ¡n Viá»‡t lÃ  'kinh há»·'." },
                    { question: "'Hoa thuá»· tiÃªn' lÃ  gÃ¬?", answer: "æ°´ä»™", hint: "Ã‚m HÃ¡n Viá»‡t lÃ  'thá»§y tiÃªn'." },
                    { question: "'Thá»‹nh vÆ°á»£ng' lÃ  gÃ¬?", answer: "å…´æ—º", hint: "Ã‚m HÃ¡n Viá»‡t lÃ  'hÆ°ng vÆ°á»£ng'." },
                ]
            },
            {
                title: "ğŸ¤” Ã”n táº­p Ngá»¯ phÃ¡p (Sáº¯p xáº¿p cÃ¢u)",
                questions: [
                    { question: "Sáº¯p xáº¿p: æˆ‘ / ä¹¦ / æ”¾åœ¨ä¹¦æ¶ä¸Š / æŠŠ", answer: "æˆ‘æŠŠä¹¦æ”¾åœ¨ä¹¦æ¶ä¸Š", hint: "Chá»§ ngá»¯ + æŠŠ + TÃ¢n ngá»¯ + Äá»™ng tá»« + ThÃ nh pháº§n khÃ¡c." },
                    { question: "Sáº¯p xáº¿p: è¯· / ä½  / è¿™å°ä¿¡ / äº¤ç»™è€å¸ˆ / æŠŠ", answer: "è¯·ä½ æŠŠè¿™å°ä¿¡äº¤ç»™è€å¸ˆ", hint: "CÃ¢u má»‡nh lá»‡nh, è¯· Ä‘á»©ng Ä‘áº§u." },
                    { question: "Sáº¯p xáº¿p: æˆ‘ä»¬ / æ•™å®¤ / å¸ƒç½®æˆ / ä¼šåœº / æŠŠ", answer: "æˆ‘ä»¬æŠŠæ•™å®¤å¸ƒç½®æˆä¼šåœº", hint: "Cáº¥u trÃºc æŠŠ... + V + æˆ..." },
                    { question: "Sáº¯p xáº¿p: å¦ˆå¦ˆ / è¡£æœ / æ´—å¹²å‡€äº† / æŠŠ", answer: "å¦ˆå¦ˆæŠŠè¡£æœæ´—å¹²å‡€äº†", hint: "Äá»«ng quÃªn äº† á»Ÿ cuá»‘i cÃ¢u Ä‘á»ƒ chá»‰ sá»± hoÃ n thÃ nh." },
                    { question: "Sáº¯p xáº¿p: ä»– / æ²¡ / ä½œä¸š / åšå®Œ / æŠŠ", answer: "ä»–æ²¡æŠŠä½œä¸šåšå®Œ", hint: "PhÃ³ tá»« phá»§ Ä‘á»‹nh 'æ²¡' Ä‘á»©ng trÆ°á»›c 'æŠŠ'." },
                ]
            },
            {
                title: "ğŸ“ Váº­n dá»¥ng thá»±c táº¿",
                questions: [
                    { 
                        question: `
                            <div class='text-left text-base'>
                                <p class='font-bold text-center text-lg mb-4'>CÃ¢u 1: Dá»n dáº¹p phÃ²ng</p>
                                <p class='mb-2'>TÆ°á»Ÿng tÆ°á»£ng báº¡n vá»«a dá»n dáº¹p vÃ  trang trÃ­ láº¡i phÃ²ng cá»§a mÃ¬nh cho má»™t dá»‹p Ä‘áº·c biá»‡t (nhÆ° Táº¿t). HÃ£y viáº¿t má»™t Ä‘oáº¡n vÄƒn ngáº¯n (50-80 chá»¯) ká»ƒ láº¡i quÃ¡ trÃ¬nh Ä‘Ã³.</p>
                                <p class='font-bold'>YÃªu cáº§u:</p>
                                <ul class='list-disc list-inside bg-rose-50 p-3 rounded-md'>
                                    <li>Sá»­ dá»¥ng Ã­t nháº¥t 3 cÃ¢u cÃ³ cáº¥u trÃºc 'æŠŠ'.</li>
                                    <li>Ãp dá»¥ng cÃ¡c cáº¥u trÃºc chá»‰ trÃ¬nh tá»± nhÆ° <strong>é¦–å…ˆ/å…ˆ, å…¶æ¬¡/ç„¶å, æœ€å</strong>.</li>
                                </ul>
                            </div>
                        `,
                        answer: "ESSAY",
                        hint: "Báº¡n cÃ³ thá»ƒ báº¯t Ä‘áº§u vá»›i viá»‡c dá»n dáº¹p (é¦–å…ˆï¼Œæˆ‘æŠŠ...), sau Ä‘Ã³ lÃ  sáº¯p xáº¿p Ä‘á»“ Ä‘áº¡c (ç„¶åï¼Œæˆ‘æŠŠ...), vÃ  cuá»‘i cÃ¹ng lÃ  trang trÃ­ (æœ€åï¼Œæˆ‘æŠŠ...)."
                    },
                    { 
                        question: `
                            <div class='text-left text-base'>
                                <p class='font-bold text-center text-lg mb-4'>CÃ¢u 2: HÆ°á»›ng dáº«n lÃ m BÃ¡nh MÃ¬</p>
                                <img src='https://tvpfood.com/wp-content/uploads/2024/11/huong-dan-cach-lam-banh-mi-cha-lua-tvpfood.com_8350d4b090294483861c4bfb6206aa5b_1024x1024.jpg' onerror="this.onerror=null;this.src='https://placehold.co/600x300/FECACA/9F1239?text=Image+Not+Found';" alt='CÃ¡c bÆ°á»›c lÃ m bÃ¡nh mÃ¬ cháº£ lá»¥a' class='rounded-lg mx-auto mb-4 w-full max-w-md'>
                                <p class='font-bold'>Tá»« vá»±ng tham kháº£o:</p>
                                <ul class='list-disc list-inside mb-4 bg-rose-50 p-3 rounded-md'>
                                    <li>BÃ¡nh mÃ¬: <strong>é¢åŒ… (miÃ nbÄo)</strong></li>
                                    <li>Cháº£ lá»¥a: <strong>è¶Šå—ç«è…¿ (yuÃ¨nÃ¡n huÇ’tuÇ)</strong></li>
                                    <li>Xáº» Ä‘Ã´i bÃ¡nh mÃ¬: <strong>æŠŠé¢åŒ…å¯¹åŠåˆ‡å¼€ (bÇ miÃ nbÄo duÃ¬bÃ n qiÄ“kÄi)</strong></li>
                                    <li>Cáº¯t lÃ¡t cháº£: <strong>æŠŠç«è…¿åˆ‡æˆç‰‡ (bÇ huÇ’tuÇ qiÄ“ chÃ©ng piÃ n)</strong></li>
                                    <li>ThÃªm/NhÃ©t vÃ o: <strong>æŠŠ...æ”¾è¿›... (bÇ...fÃ ngjÃ¬n...)</strong></li>
                                    <li>DÆ°a leo: <strong>é»„ç“œ (huÃ¡ngguÄ)</strong></li>
                                    <li>Rau mÃ¹i: <strong>é¦™èœ (xiÄngcÃ i)</strong></li>
                                    <li>Xá»‹t tÆ°Æ¡ng á»›t: <strong>æŠŠè¾£æ¤’é…±æŒ¤ä¸Šå» (bÇ lÃ jiÄojiÃ ng jÇ shÃ ngqÃ¹)</strong></li>
                                </ul>
                                <p class='font-bold'>YÃªu cáº§u: Dá»±a vÃ o hÃ¬nh, hÃ£y viáº¿t má»™t Ä‘oáº¡n vÄƒn mÃ´ táº£ cÃ¡c bÆ°á»›c lÃ m má»™t á»• bÃ¡nh mÃ¬.</p>
                                 <ul class='list-disc list-inside bg-rose-50 p-3 rounded-md'>
                                    <li>Sá»­ dá»¥ng Ã­t nháº¥t 3 cÃ¢u cÃ³ cáº¥u trÃºc 'æŠŠ'.</li>
                                    <li>Ãp dá»¥ng cÃ¡c cáº¥u trÃºc chá»‰ trÃ¬nh tá»± nhÆ° <strong>ç¬¬ä¸€, ç¬¬äºŒ, ç¬¬ä¸‰...</strong>.</li>
                                </ul>
                            </div>
                        `,
                        answer: "ESSAY",
                        hint: "Báº¯t Ä‘áº§u báº±ng viá»‡c xá»­ lÃ½ bÃ¡nh mÃ¬ (ç¬¬ä¸€æ­¥ï¼ŒæŠŠé¢åŒ…...), sau Ä‘Ã³ thÃªm nhÃ¢n (ç¬¬äºŒæ­¥ï¼ŒæŠŠç«è…¿å’Œé»„ç“œ...), vÃ  cuá»‘i cÃ¹ng lÃ  thÃªm nÆ°á»›c sá»‘t (æœ€åï¼ŒæŠŠè¾£æ¤’é…±...)."
                    }
                ]
            }
        ];

        // Biáº¿n tráº¡ng thÃ¡i cá»§a trÃ² chÆ¡i
        let currentSectionIndex = 0;
        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let seconds = 0;
        let mistakes = [];
        let essayAnswers = [];

        // HÃ m báº¯t Ä‘áº§u trÃ² chÆ¡i
        function startGame() {
            currentSectionIndex = 0;
            currentQuestionIndex = 0;
            score = 0;
            seconds = 0;
            mistakes = [];
            essayAnswers = [];

            scoreEl.textContent = score;
            startScreen.classList.add('hidden');
            summaryScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            
            startTimer();
            loadQuestion();
        }

        function startTimer() {
            timerEl.textContent = '00:00';
            clearInterval(timer); 
            timer = setInterval(() => {
                seconds++;
                const mins = String(Math.floor(seconds / 60)).padStart(2, '0');
                const secs = String(seconds % 60).padStart(2, '0');
                timerEl.textContent = `${mins}:${secs}`;
            }, 1000);
        }

        function loadQuestion() {
            feedbackMessage.textContent = '';
            feedbackMessage.className = 'text-center font-bold text-xl p-2 min-h-[40px]';
            answerInput.value = '';
            
            if (currentSectionIndex >= gameData.length) {
                showSummary();
                return;
            }

            const section = gameData[currentSectionIndex];
            const question = section.questions[currentQuestionIndex];
            
            sectionTitle.textContent = section.title;
            questionCounter.textContent = `CÃ¢u ${currentQuestionIndex + 1} / ${section.questions.length}`;
            
            questionContainer.innerHTML = `<div class="text-xl md:text-2xl font-medium">${question.question}</div>`;

            if (question.answer === "ESSAY") {
                inputArea.classList.add('hidden');
                essayArea.classList.remove('hidden');
                essayInput.focus();
            } else {
                inputArea.classList.remove('hidden');
                essayArea.classList.add('hidden');
                answerInput.focus();
            }
        }

        function checkAnswer() {
            const userAnswer = answerInput.value.trim().replace(/[.,ã€‚ï¼Œ]/g, '');
            if (userAnswer === '') {
                feedbackMessage.textContent = 'Báº¡n Æ¡i, chÆ°a nháº­p cÃ¢u tráº£ lá»i! ğŸ¤”';
                feedbackMessage.className += ' text-orange-500';
                return;
            }

            const correctAnswer = gameData[currentSectionIndex].questions[currentQuestionIndex].answer.replace(/[.,ã€‚ï¼Œ]/g, '');
            
            if (userAnswer === correctAnswer) {
                score += 10;
                scoreEl.textContent = score;
                feedbackMessage.textContent = 'ChÃ­nh xÃ¡c! Báº¡n giá»i quÃ¡! âœ…';
                feedbackMessage.className += ' text-green-500 feedback-correct';
            } else {
                feedbackMessage.textContent = `Tiáº¿c quÃ¡, sai rá»“i! ÄÃ¡p Ã¡n Ä‘Ãºng lÃ : ${gameData[currentSectionIndex].questions[currentQuestionIndex].answer} âŒ`;
                feedbackMessage.className += ' text-red-500 feedback-incorrect';
                mistakes.push({
                    question: gameData[currentSectionIndex].questions[currentQuestionIndex].question,
                    yourAnswer: answerInput.value,
                    correctAnswer: gameData[currentSectionIndex].questions[currentQuestionIndex].answer
                });
            }
            setTimeout(nextQuestion, 1500);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= gameData[currentSectionIndex].questions.length) {
                currentSectionIndex++;
                currentQuestionIndex = 0;
            }
            loadQuestion();
        }
        
        function showHint() {
            const hint = gameData[currentSectionIndex].questions[currentQuestionIndex].hint;
            feedbackMessage.textContent = `ğŸ’¡ Gá»£i Ã½: ${hint}`;
            feedbackMessage.className = 'text-center font-bold text-xl p-2 min-h-[40px] text-sky-600';
        }

        function submitEssay() {
            essayAnswers.push(essayInput.value);
            essayInput.value = '';
            nextQuestion(); 
        }

        function showSummary() {
            clearInterval(timer);
            gameScreen.classList.add('hidden');
            summaryScreen.classList.remove('hidden');

            const correctCount = (score / 10);
            document.getElementById('correct-summary').textContent = correctCount;
            document.getElementById('incorrect-summary').textContent = mistakes.length;
            document.getElementById('time-summary').textContent = timerEl.textContent;

            const mistakeList = document.getElementById('mistake-list');
            mistakeList.innerHTML = '';
            if (mistakes.length === 0) {
                mistakeList.innerHTML = '<li>ChÃºc má»«ng! Báº¡n khÃ´ng sai cÃ¢u nÃ o.</li>';
            } else {
                mistakes.forEach(mistake => {
                    const li = document.createElement('li');
                    const questionDiv = document.createElement('div');
                    questionDiv.innerHTML = mistake.question;
                    li.innerHTML = `<b>CÃ¢u há»i:</b> "${questionDiv.innerText.split('\n')[0]}" <br> <span class="text-red-600">Báº¡n tráº£ lá»i: ${mistake.yourAnswer}</span> | <span class="text-green-600">ÄÃ¡p Ã¡n Ä‘Ãºng: ${mistake.correctAnswer}</span>`;
                    mistakeList.appendChild(li);
                });
            }
            
            const essayReviewSection = document.getElementById('essay-review-section');
            const savedEssayContainer = document.getElementById('saved-essay-container');
            savedEssayContainer.innerHTML = '';
            if (essayAnswers.length > 0) {
                essayReviewSection.classList.remove('hidden');
                 essayAnswers.forEach((answer, index) => {
                    if (answer.trim() !== '') {
                        const essayDiv = document.createElement('div');
                        essayDiv.className = 'bg-gray-100 p-4 rounded-lg whitespace-pre-wrap mb-2';
                        essayDiv.innerHTML = `<p class="font-semibold mb-1">BÃ i viáº¿t ${index + 1}:</p><p>${answer}</p>`;
                        savedEssayContainer.appendChild(essayDiv);
                    }
                });
            } else {
                essayReviewSection.classList.add('hidden');
            }
        }

        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);
        checkBtn.addEventListener('click', checkAnswer);
        answerInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        skipBtn.addEventListener('click', nextQuestion);
        hintBtn.addEventListener('click', showHint);
        submitEssayBtn.addEventListener('click', submitEssay);
    </script>
</body>
</html>
